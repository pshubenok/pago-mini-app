<!DOCTYPE html>
<html>
    <head>
        <script src="https://telegram.org/js/telegram-web-app.js"></script>
        <link rel="stylesheet" href="style.css">
        <link href="https://fonts.cdnfonts.com/css/aremat-font" rel="stylesheet">
        <!-- Compiled and minified CSS -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

        <!-- Compiled and minified JavaScript -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

    </head>
<body>
<div class="flex-column">
    <div class="flex-row">
        <div class="flex-column">
            <span class="title">Pago</span>
            <span class="title-red">Pay</span>
        </div>
        <div class="action-icon-container">
            <img class="action-icon">
        </div>
    </div>
    <div class="flex-column-aligned buttons-container gap-6">
        <div class="flex-row-aligned gap-6">
            <a class="btn-floating waves-effect waves-light action-button" onclick="onButtonClick(1)">
                <img src="assets/image1.png">
            </a>
            <a class="btn-floating waves-effect waves-light action-button" onclick="onButtonClick(2)">
                <img src="assets/image2.png">
            </a>
        </div>
        <div class="flex-row-aligned gap-6">
            <a class="btn-floating waves-effect waves-light action-button" onclick="onButtonClick(3)">
                <img src="assets/image3.png">
            </a>
            <a class="btn-floating waves-effect waves-light action-button" onclick="onButtonClick(4)">
                <img src="assets/image4.png">
            </a>
        </div>
    </div>
    <div class="flex-column-aligned inputs-container gap-3">
        <div class="flex-row flex-1">
            <input id="price" placeholder="Price" type="text" class="text-input default">
        </div>
        <div class="flex-row flex-1">
            <input id="token" placeholder="Token / # phone / # loyalty" type="text" class="text-input default">
        </div>
        <div class="flex-row flex-1">
            <input id="points" placeholder="Points" type="text" class="text-input default flex-1">
        </div>
        <div class="flex-row flex-1">
            <select id="shop" class="browser-default select">
                <option value="1">Perekrestok</option>
                <option value="2">Magnit</option>
                <option value="3">Vkusvill</option>
                <option value="4">Metro</option>
                <option value="5">Pyaterochka</option>
                <option value="6">Diksi</option>
            </select>
        </div>

        <a class="waves-effect waves-light btn request-button" onclick="onSubmit()">Request</a>
    </div>
</div>
</body>
</html>

<script>

    Telegram.WebApp.ready();


    function onButtonClick(action) {
        var container = document.getElementsByClassName('buttons-container')[0];
        var actionIcon = document.getElementsByClassName('action-icon')[0];
        var inputsContainer = document.getElementsByClassName('inputs-container')[0];
        var actionIconContainer = document.getElementsByClassName('action-icon-container')[0];

        if (action === 1) {
            actionIcon.src = 'assets/image1.png';
        } else if (action === 2) {
            actionIcon.src = 'assets/image2.png';
        } else if (action === 3) {
            actionIcon.src = 'assets/image3.png';
        } else if (action === 4) {
            actionIcon.src = 'assets/image4.png';
        }

        container.style.display = 'none';
        inputsContainer.style.display = 'flex';
        actionIconContainer.style.display = 'flex';


    }

    function onSubmit() {
        var points = document.getElementById('points').value;
        var price = document.getElementById('price').value;
        var token = document.getElementById('token').value;
        var shop = document.getElementById('shop').value;

        Telegram.WebApp.sendData(JSON.stringify({
            points: points,
            price: price,
            token: token,
            shop: shop
        }));
    }


</script>
